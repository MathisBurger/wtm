{% extends 'navbarBase.html.twig' %}

{% block body %}
    <div class="container mt-5">
        <h1>{{ employee.getFirstName() }} {{ employee.getLastName() }} ({{ employee.getUsername() }})</h1>
        <a class="btn btn-primary" href="{{ path("worktime_specialday_create", {id: employee.getId()}) }}">
            {{ 'actions.createSpecialDay'|trans }}
        </a>
        <ul class="nav nav-tabs mt-5">
            <li class="nav-item">
                <a class="nav-link {{ tab == null ? 'active' : ''}}" href="{{ path("employee_details", {id: employee.getId()}) }}">{{ 'tab.general'|trans }}</a>
            </li>
            <li class="nav-item">
                <a class="nav-link {{ tab == "holiday" ? 'active' : ''}}" href="{{ path("employee_details", {id: employee.getId()}) }}?tab=holiday">{{ 'tab.holiday'|trans }}</a>
            </li>
            <li class="nav-item">
                <a class="nav-link {{ tab == "illness" ? 'active' : ''}}" href="{{ path("employee_details", {id: employee.getId()}) }}?tab=illness">{{ 'tab.illness'|trans }}</a>
            </li>
        </ul>
        {% if tab == "holiday" %}
            <div class="mt-2">
                <h1>{{ 'title.holidays'|trans }}</h1>
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">{{ 'table.date'|trans }}</th>
                        <th scope="col">{{ 'table.notes'|trans }}</th>
                        <th scope="col">{{ 'table.actions'|trans }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for holiday in holidays %}
                        <tr>
                            <th scope="row">{{ holiday.getId() }}</th>
                            <td>{{ holiday.getDateString() }}</td>
                            <td>{{ holiday.getNotes() }}</td>
                            <td>
                                <a class="btn btn-sm btn-danger" href="{{ path("worktime_specialday_delete", {id: holiday.getId()}) }}">{{ 'actions.delete'|trans }}</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        {% elseif tab == "illness" %}
            <div class="mt-2">
                <h1>{{ 'title.illnessDays'|trans }}</h1>
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">{{ 'table.date'|trans }}</th>
                        <th scope="col">{{ 'table.notes'|trans }}</th>
                        <th scope="col">{{ 'table.actions'|trans }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for illnessDay in illnessDays %}
                        <tr>
                            <th scope="row">{{ illnessDay.getId() }}</th>
                            <td>{{ illnessDay.getDateString() }}</td>
                            <td>{{ illnessDay.getNotes() }}</td>
                            <td>
                                <a class="btn btn-sm btn-danger" href="{{ path("worktime_specialday_delete", {id: illnessDay.getId()}) }}">{{ 'actions.delete'|trans }}</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="row mt-2">
                <div class="col-md-6">
                    <h3>{{ 'title.generalInformation'|trans }}</h3>
                    <ul>
                        <li><b>{{ 'list.holidays'|trans }}:</b> {{ employee.getHolidays() }}</li>
                        {% if employee.getHolidaysLeft() %}
                            <li><b>{{ 'list.holidaysLeft'|trans }}:</b> {{ employee.getHolidaysLeft() }}</li>
                        {% endif %}
                        {% if employee.getTargetWorkingHours() != null and employee.getTargetWorkingHours() != 0  %}
                            <li><b>{{ 'list.targetHours'|trans }}:</b> {{ employee.getTargetWorkingHours() }}</li>
                            <li><b>{{ 'list.overtimeTransfer'|trans }}:</b> {{ overtimeTransfer }}</li>
                            <li><b>{{ 'list.overtime'|trans }}:</b> {{ overtime }}</li>
                            <li><b>{{ 'list.overtimeTotal'|trans }}:</b> {{ overtimeSum }}</li>
                        {% endif %}
                    </ul>
                    <h5>{{ 'form.employee.label.workTimes'|trans }}:</h5>
                    {{ component('WorkTimePlan', {worktimes: employee.getConfiguredWorktimes()}) }}
                </div>
                <div class="col col-md-6">
                    <h3>{{ 'list.workTimes'|trans }}</h3>
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">{{ 'table.date'|trans }}</th>
                            <th scope="col">{{ 'table.startTime'|trans }}</th>
                            <th scope="col">{{ 'table.endTime'|trans }}</th>
                            <th scope="col">{{ 'table.totalTime'|trans }}</th>
                            <th scope="col">{{ 'table.loginFrom'|trans }}</th>
                            <th scope="col">{{ 'table.logoffFrom'|trans }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for period in periods %}
                            <tr>
                                <th scope="row">{{ period.getId() }}</th>
                                <td>{{ period.getDate() }}</td>
                                <td>{{ period.getStartTimeString() }}</td>
                                <td>{{ period.getEndTimeString() }}</td>
                                <td>{{ period.getTimeDiff() }}</td>
                                <td>{{ period.getLoginDevice() }}</td>
                                <td>{{ period.getLogoutDevice() }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}